Для написания сценария edcl необходимо: 

* Создать текстовой файл, например script.edcl, в шапке указать путь к интерпретатору edcltool. 
Например: 
#!/usr/local/bin/edcltool

Поместить в этот файл команды. Для исполнения код используется интерпретатор языка 
lua, все стандартные библиотеки доступны.

Для работы с edcl доступны следующие функции: 



ecl_init(); 

Инициализация edcl и установление соединения с платой. Вызов этой функции должен предшествовать всем остальным вызовам.

edcl_write(type, address, value)

Запись памяти через edcl. type определяет режим записи, address - начальный адрес для записи. value - значение. Ограничения на value определяется типом записи. 
Доступно 4 режима записи: 

type = 1
Запись одного байта по адресу. 

Пример: 
-- Записать 1 байт (0x34) в 0x10000 
edcl_write(1 , 0x10000 , 0x34);
-- или
edcl_write(1 , 0x10000 , 52);

type = 2, записать число из двух байт, порядок little endian в адрес памяти
Пример:
edcl_write(2,0x10000,0x3432);

type = 4, записать 4 байта (little endian) в адрес памяти 
Пример:
edcl_write(4,0x10000,0x3432deaf);

type = 0, записать последовательность байт в адрес памяти. 
value при этом должно быть СТРОКОЙ, представляющей последовательность байт. 
Пример: 
edcl_write(0 , 0x10000 , "DEADBEEF0000FFFE");


Аналогично реализовано чтение значений из памяти. 
value = edcl_read(type,address);

Поддерживае типы: 1 2 и 4, аналогично edcl_write

Примеры:
a = edcl_read(1,0x40000000);
b = edcl_read(2,0x40000004);
c = edcl_read(4,0x40000000);
print(a..b..c);


Так же можно ожидать появления числа в памяти при помощи edcl_wait.
Поддерживаемые типы: 1 2 4 
edcl_wait(type,address,value);

Пример: 
-- Ожидать появления байта 0x32 в памяти по адресу 0x1000.
edcl_wait(1,0x1000,0x32);

Для изменения интервала опроса памяти можно воспользоваться функцией ecl_poll_interval

-- Установка частоты опроса регистров для edcl_wait
-- Значение задается в микросекундах
edcl_poll_interval(100000);


Снятие дампа памяти в файл:
edcl_download(addr, filename, len);
Пример: 
-- Снятие дампа памяти
--- len=0x40000
--- edcl_download(0x1000, "/tmp/dump.bin", len);

Загрузка файла в память по адресу
n = edcl_upload(addr, filename);
Пример:
edcl_upload(0x40000000, "/etc/resolv.conf");
